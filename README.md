# Using this repo in a paper repository

We write most of our papers in ```git``` repositories, there it is usually a good idea to
make this repository into an external sub-repository that can be updated as necesary. In
the instructions below we asume that you - as the paper repos maintainer - want to add the
KWARC bibs as a sub-repository at path ```lib/kbibs``` from the top of the paper
prepository.

## Externals in SVN
In a subversion repository you can must make an external by

1. go to the top of your paper preository: ```cd path/to/top```
2. make the ```lib``` subdir if necessary: ```mkdir lib```
3. add the external: ```svn propedit svn:externals lib```
4. an editor will appear, add the line ```kbibs bibs https://github.com/KWARC/bibs.git```
5. commit your work: ```svn commit -m'adding external for the KWARC bibs'```

Note that in SVN any ```snv update``` will update the KWARC bibs in the external as well. 

## The best way for GIT
is via the ```git-subrepo``` extension of ```git```. Unfortunately this is not part of git
(yet). So you as the paper repos maintainer have to
[install it first](https://github.com/git-commands/git-subrepo#readme) if you want to
install the KWARC bibs as a subrepos. Your users do not, they will get the subrepos
automatically on ```git clone``` or ```git pull```. 

1. go to the top of your paper preository: ```cd path/to/top``` (you can only make a
  "subrepo" from there) 
2. add the KWARC bibs repos as a "subrepo": ```git subrepo clone git@github.com:KWARC/bibs.git lib/kbibs```

Note that under ```git-subrepo``` the "external" is not updated automatically, a
maintainer has to "pull" it. This can be seen as a feature and not a bug (there is less of
a chance to break things).

1. go to the top of your paper preository: ```cd path/to/top``` (you can only pull from there)
2. pull the KWARC bibs repos as a "subrepo": ```git subrepo pull lib/kbbis```

To contribute changes back to the the KWARC bibs repository, you analogously do 

1. go to the top of your paper preository: ```cd path/to/top``` (you can only push from there)
2. pull the KWARC bibs repos as a "subrepo": ```git subrepo push lib/kbbis```

easypeasy!

## The second best way for GIT
is via ```git subtree```. 

1. go to the top of your paper preository: ```cd path/to/top```
2. add the KWARC bibs repos as a remote: ```git remote add kbibs
    git@github.com:KWARC/bibs.git``` under the name ```kbibs```.
3. add the remote ```kbibs```  as a subtree: ```git subtree add --prefix=lib/kbibs kbibs master --squash```
  (here under the path ```lib/kbibs```). The ```--squash``` reduces history noise. 

When you want to update the subrepository to the newest version, you have to "subtree
pull" as above: 

1. go to the top of your paper preository: ```cd path/to/top```
2. subtree-pull: ```git subtree pull --prefix=lib/kbibs kbibs master --squash```
  this is a bit inconvenient, but works well.

Contributing back to the KWARC bibs repository is somewhat more complex; RTFM!

# Files

The directory contains the bib resources of the KWARC group, most notably the
citation database kwarc.bib.Note that kwarc.bib is generated by concatenating
the following individual files, and that it is read-only.Please edit the
following files: 

* preamble.bib – LaTeX preamble that defines shared macros and strings
* kwarcpubs.bib – individual publications of KWARC members (e.g. @article,
@inproceedings)
* kwarccrossrefs.bib – crossref targets (e.g. @proceedings) edited by KWARC
members (e.g. when one of us chaired a workshop)
* extpubs.bib – publications by external researchers (which may cross-reference
targets in kwarccrossrefs.bib!)
* extcrossrefs.bib – crossref targets edited by external researchers,
 regardless of whether KWARC or external publications refer to them.

For making citations in your documents, you can simply continue to use the
all-in-one kwarc.bib (but keep in mind that it is not editable!), or
alternatively you can use the individual files. In the latter case, use the
following order:

1. preamble.bib
2. *pubs.bib
3. *crossrefs.bib

# BibTeX
export BIBINPUTS=".:${HOME}/kwarc/doc/bibs"
export BSTINPUTS=".:${HOME}/tex/lib/bibs"

## EDITING
This file does not have any particular order.
 
Do not use any graphical frontend for editing, but use a text 
editor, as the latter makes sure that changes are easy to spot
when using Subversion's diff.
 
Do not touch anything that you don't understand.
 
It is easiest to create new entries by copying and modifying 
existing ones. 

## ONLINE-PUBLICATIONS
For online publications, it is strongly recommended to use
BibLaTeX's @online{foo:on} entries; see 
http://trac.kwarc.info/KWARC/wiki/BibLaTeX 
 
Most online publications come in multiple variants for 
compatibility with legacy publication workflows (such as LNCS). 
The naming scheme is: 
 
* @online{entry:on} -- BibLaTeX `online' entry 
* @webpage{entry:webpage} -- alpha[h]url, an older solution for 
 online citations
* @misc{entry:web} -- plain BibTeX entry 
* @misc{entry:base} -- crossref'd by the others above, contains 
 common fields, not suitable for citation

## PUBLICATION-LIST-GENERATION
The publication lists on the KWARC homepage are generated from
this file; see 
http://trac.kwarc.info/wsml/wiki/PublicationLists 

